<div *ngIf="isLoading$ | async" class="loading-box">
  <div class="spinner-border text-primary" role="status"></div>
  <span class="loading-text">Cargando...</span>
</div>

<!--begin::Row-->
<div class="row gy-5 gx-xl-10">

  <div class="col-md-6 col-lg-6 col-xl-6 col-xxl-6 mb-md-5 mb-xl-10">
    <div class="row">
      <div class="col-6 mb-md-5 mb-xl-10">
        <div class="row g-5 g-xl-8">

          <div class="col-xl-6">
            <!--begin::Card widget 2-->
            <a href="javascript:;" class="card bg-body hoverable card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <div class="card-body d-flex justify-content-between align-items-start flex-column">
                <!--begin::Icon-->
                <div class="m-0">
                  <i class="ki-duotone ki-chart-simple fs-2hx text-primary">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    <span class="path3"></span>
                    <span class="path4"></span>
                  </i>
                </div>
                <!--end::Icon-->

                <!--begin::Section-->
                <div class="d-flex flex-column my-7">
                  <!--begin::Number-->
                  <span class="text-gray-800 fw-semibold fs-5 lh-1 ls-n2">$ {{
                    total_compra | number:'1.2-2' }}</span>
                  <!--end::Number-->
                  <!--begin::Follower-->
                  <div class="m-0">
                    <span class="fw-semibold fs-7 text-gray-500">Total de Compras</span>
                  </div>
                  <!--end::Follower-->
                </div>
                <!--end::Section-->
              </div>
              <!--end::Body-->
            </a>
            <!--end::Card widget 2-->
          </div>

          <div class="col-xl-6">
            <!--begin::Card widget 2-->
            <a href="javascript:;" class="card bg-dark hoverable card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <div class="card-body d-flex justify-content-between align-items-start flex-column">
                <!--begin::Icon-->
                <div class="m-0">
                  <i class="ki-duotone ki-cheque fs-2hx text-gray-100">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    <span class="path3"></span>
                    <span class="path4"></span>
                    <span class="path5"></span>
                    <span class="path6"></span>
                    <span class="path7"></span>
                  </i>
                </div>
                <!--end::Icon-->

                <!--begin::Section-->
                <div class="d-flex flex-column my-7">
                  <!--begin::Number-->
                  <span class="text-gray-100 fw-semibold fs-5 lh-1 ls-n2">{{ total_clientes }}</span>
                  <!--end::Number-->
                  <!--begin::Follower-->
                  <div class="m-0">
                    <span class="fw-semibold fs-7 text-gray-100">Nuevos Clientes</span>
                  </div>
                  <!--end::Follower-->
                </div>
                <!--end::Section-->
              </div>
              <!--end::Body-->
            </a>
            <!--end::Card widget 2-->
          </div>

          <div class="col-xl-6">
            <!--begin::Card widget 2-->
            <a href="javascript:;" class="card bg-warning hoverable card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <div class="card-body d-flex justify-content-between align-items-start flex-column">
                <!--begin::Icon-->
                <div class="m-0">
                  <i class="ki-duotone ki-briefcase fs-2hx text-white">
                    <span class="path1"></span>
                    <span class="path2"></span>
                  </i>
                </div>
                <!--end::Icon-->

                <!--begin::Section-->
                <div class="d-flex flex-column my-7">
                  <!--begin::Number-->
                  <span class="text-white fw-semibold fs-5 lh-1 ls-n2">$ {{ sede_mas_venta?.total_venta ?? 0 |
                    number:'1.2-2'
                    }}</span>
                  <!--end::Number-->
                  <!--begin::Follower-->
                  <div class="m-0">
                    <span class="fw-semibold fs-7 text-white">{{ sede_mas_venta?.sede?.nombre ?? '' }}
                    </span>
                  </div>
                  <!--end::Follower-->
                </div>
                <!--end::Section-->
              </div>
              <!--end::Body-->
            </a>
            <!--end::Card widget 2-->
          </div>

          <div class="col-xl-6">
            <!--begin::Card widget 2-->
            <a href="javascript:;" class="card bg-info hoverable card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <div class="card-body d-flex justify-content-between align-items-start flex-column">
                <!--begin::Icon-->
                <div class="m-0">
                  <i class="ki-duotone ki-chart-pie-simple fs-2hx text-white">
                    <span class="path1"></span>
                    <span class="path2"></span>
                  </i>
                </div>
                <!--end::Icon-->

                <!--begin::Section-->
                <div class="d-flex flex-column my-7">
                  <!--begin::Number-->
                  <span class="text-white fw-semibold fs-5 lh-1 ls-n2">$ {{ total_ventas | number:'1.2-2' }}</span>
                  <!--end::Number-->
                  <!--begin::Follower-->
                  <div class="m-0">
                    <span class="fw-semibold fs-7 text-white">Total de Ventas</span>
                  </div>
                  <!--end::Follower-->
                </div>
                <!--end::Section-->
              </div>
              <!--end::Body-->
            </a>
            <!--end::Card widget 2-->
          </div>

        </div>
      </div>

      <div class="col-6 mb-md-5 mb-xl-10">
        <!--begin::Chart widget 27-->
        <div class="card card-flush h-xl-100">
          <!--begin::Header-->
          <div class="card-header pt-7">
            <!--begin::Statistics-->
            <div class="m-0">
              <!--begin::Heading-->
              <div class="d-flex align-items-center mb-2">
                <!--begin::Title-->
                <span class="fs-2 fw-bold text-gray-800 me-2 lh-1 ls-n1">$ {{ ventas_total_x_sedes | number:'1.2-2'
                  }}</span>
                <!--end::Title-->
                <!--begin::Label-->
                <span class="badge fs-base"
                  [ngClass]="{'badge-light-success': porcentaje_ventas_sedes>=0,'badge-light-danger': porcentaje_ventas_sedes<0}">

                  <i class="ki-duotone fs-5 ms-n1" [ngClass]="{'ki-arrow-up text-success': porcentaje_ventas_sedes >= 0,
              'ki-arrow-down text-danger': porcentaje_ventas_sedes < 0
                }">
                    <span class="path1"></span>
                    <span class="path2"></span>
                  </i>
                  {{ porcentaje_ventas_sedes | number:'1.2-2'
                  }}%</span>
                <!--end::Label-->
              </div>
              <!--end::Heading-->
              <!--begin::Description-->
              <span class="fs-6 fw-semibold text-gray-500">Ventas por Sedes</span>
              <!--end::Description-->
            </div>
            <!--end::Statistics-->
            <!--begin::Toolbar-->
            <div class="card-toolbar">
              <!--begin::Menu-->
              <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end"
                data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
                <i class="ki-duotone ki-dots-square fs-1 text-gray-500 me-n1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                </i>
              </button>
              <!--begin::Menu 2-->
              <div
                class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px"
                data-kt-menu="true">
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda:</div>
                </div>
                <!--end::Menu item-->
                <!--begin::Menu separator-->
                <div class="separator mb-3 opacity-75"></div>
                <!--end::Menu separator-->
                <div class="px-3">
                  <select class="form-select fw-bolder" name="year" placeholder="Filtrar por Año" [(ngModel)]="year_vs">
                    <option [ngValue]="9999999" selected>Años</option>
                    <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                  </select>
                  <small class="form-text text-muted"><b>Filtrar</b> por Año</small>
                </div>
                <!--begin::Menu separator-->
                <div class="separator mt-3 opacity-75"></div>
                <!--end::Menu separator-->
                <div class="px-3">
                  <select class="form-select fw-bolder" name="month" placeholder="Filtrar por Mes"
                    [(ngModel)]="month_vs">
                    <option [ngValue]="'9999999'" selected>Meses</option>
                    <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
                  </select>
                  <small class="form-text text-muted"><b>Filtrar</b> por Mes</small>
                </div>
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content px-3 py-3">
                    <a class="btn btn-primary btn-sm w-100" onclick="return false;" (click)="ventasXSedes()" href="#">
                      <i class="fs-2 ki-duotone ki-search-list">
                        <span class="path1"></span>
                        <span class="path2"></span>
                        <span class="path3"></span>
                      </i>
                      Generar Reporte
                    </a>
                  </div>
                </div>
                <!--end::Menu item-->
              </div>
              <!--end::Menu 2-->
              <!--end::Menu-->
            </div>
            <!--end::Toolbar-->
          </div>
          <!--end::Header-->
          <!--begin::Body-->
          <div class="card-body p-0">
            <div *ngIf="ventas_x_sedes.length > 0" id="kt_charts_widget_27" class="min-h-auto"></div>
          </div>
          <!--end::Body-->
        </div>
        <!--end::Chart widget 27-->
      </div>
    </div>
  </div>

  <div class="col-xxl-6" cssClass="h-md-100">
    <div class="card card-flush overflow-hidden">
      <div class="card-header py-5">
        <!--begin::Title-->
        <h3 class="card-title align-items-start flex-column">
          <span class="card-label fw-bold text-gray-900">Ventas por dia del mes en : {{ nombre_sede }}</span>
          <!-- <span class="text-gray-500 mt-1 fw-semibold fs-6">Users from all channels</span> -->
        </h3>
        <!--end::Title-->
        <!--begin::Toolbar-->
        <div class="card-toolbar">
          <!--begin::Menu-->
          <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end"
            data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
            <i class="ki-duotone ki-dots-square fs-1">
              <span class="path1"></span>
              <span class="path2"></span>
              <span class="path3"></span>
              <span class="path4"></span>
            </i>
          </button>
          <!--begin::Menu 2-->
          <div
            class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px"
            data-kt-menu="true">
            <!--begin::Menu item-->
            <div class="menu-item px-3">
              <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda:</div>
            </div>
            <!--end::Menu item-->
            <!--begin::Menu separator-->
            <div class="separator mb-3 opacity-75"></div>
            <!--end::Menu separator-->

            <div class="px-3">
              <select class="form-select fw-bolder" name="year" placeholder="Filtrar por Año" [(ngModel)]="year_2">
                <option [ngValue]="9999999" selected>Años</option>
                <option *ngFor="let year of years" [value]="year">{{ year }}</option>
              </select>
              <small class="form-text text-muted"><b>Filtrar</b> por Año</small>
            </div>
            <!--begin::Menu separator-->
            <div class="separator mt-3 opacity-75"></div>
            <!--end::Menu separator-->
            <div class="px-3">
              <select class="form-select fw-bolder" name="month" placeholder="Filtrar por Mes" [(ngModel)]="month_2">
                <option [ngValue]="'9999999'" selected>Meses</option>
                <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
              </select>
              <small class="form-text text-muted"><b>Filtrar</b> por Mes</small>
            </div>

            <div class="px-3">
              <select class="form-control form-select-solid fw-bolder" name="sede_id" placeholder="Filtrar por Sedes"
                [(ngModel)]="sede_id" (ngModelChange)="actualizarNombreSede()">
                <option [ngValue]="9999999">Todos</option>
                <ng-container *ngFor="let item of sedes">
                  <option [value]="item.id">{{ item.nombre }}</option>
                </ng-container>

              </select>
              <small class="form-text text-muted"><b>Filtrar</b> por Sede</small>
            </div>

            <!--begin::Menu separator-->
            <div class="separator mt-3 opacity-75"></div>
            <!--end::Menu separator-->
            <!--begin::Menu item-->
            <div class="menu-item px-3">
              <div class="menu-content px-3 py-3">
                <a class="btn btn-primary btn-sm w-100" onclick="return false;" (click)="ventasXDiaMes()" href="#">
                  <i class="fs-2 ki-duotone ki-search-list">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    <span class="path3"></span>
                  </i>
                  Generar Reporte
                </a>
              </div>
            </div>
            <!--end::Menu item-->
          </div>
          <!--end::Menu 2-->
          <!--end::Menu-->
        </div>
        <!--end::Toolbar-->
      </div>

      <div class="card-body d-flex justify-content-between flex-column pb-1 px-0">
        <!--begin::Statistics-->
        <div class="px-9 mb-5">
          <!--begin::Statistics-->
          <div class="d-flex align-items-center mb-2">
            <span class="fs-4 fw-semibold text-gray-500 align-self-start me-1"> $</span>
            <span class="fs-2hx fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ ventas_total_x_day_mes | number:'1.2-2'
              }}</span>

            <span class="badge  fs-base"
              [ngClass]="{'badge-light-success': porcentaje_ventas_x_dia_mes >= 0, 'badge-light-danger': porcentaje_ventas_x_dia_mes < 0}">
              <i class="ki-duotone ki-arrow-up fs-5 ms-n1"
                [ngClass]="{'text-success': porcentaje_ventas_x_dia_mes >= 0, 'text-danger': porcentaje_ventas_x_dia_mes < 0}">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>{{ porcentaje_ventas_x_dia_mes }}%</span>
          </div>

          <!--end::Statistics-->
          <!--begin::Description-->
          <span class="fs-6 fw-semibold text-gray-500">Ventas del mes anterior $ {{ ventas_total_pasado_x_day_mes |
            number:'1.2-2' }}
          </span>
          <!--end::Description-->
        </div>
        <!--end::Statistics-->
        <!--begin::Chart-->
        <div *ngIf="venta_dia_del_mes.length > 0" id="kt_charts_widget_3" class="min-h-auto ps-4 pe-6"
          style="height: 300px"></div>
        <!--end::Chart-->
      </div>

    </div>
  </div>

  <div class="col-12 mt-5">
    <div class="row justify-content-center">

      <div class="col-md-7 col-lg-7 col-xl-7 col-xxl-7 mb-md-5 mb-xl-10">
        <div class="row justify-content-center">
          <div class="col-12" *ngIf="year_vs">
            <app-mixed-widget11 class="card card-xl-stretch mb-xl-8" chartColor="danger" chartHeight="250px"
              [year]="year_vs"></app-mixed-widget11>
          </div>
        </div>
      </div>

      <div class="col-md-5 col-lg-5 col-xl-5 col-xxl-5 mb-md-5 mb-xl-10">
        <div class="card card-flush h-xl-100">
          <div class="card-header pt-7">
            <!--begin::Title-->
            <h3 class="card-title align-items-start flex-column">
              <span class="card-label fw-bold text-gray-800">Ventas por segmento de cliente</span>
              <span class="text-gray-500 mt-1 fw-semibold fs-6">Total: $ {{ total_venta_segmento |
                number:'1.2-2' }}</span>
            </h3>
            <!--end::Title-->
            <!--begin::Toolbar-->
            <div class="card-toolbar">
              <!--begin::Menu-->
              <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end"
                data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
                <i class="ki-duotone ki-dots-square fs-1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                </i>
              </button>
              <!--begin::Menu 2-->
              <div
                class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px"
                data-kt-menu="true">
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda:</div>
                </div>
                <!--end::Menu item-->
                <!--begin::Menu separator-->
                <div class="separator mb-3 opacity-75"></div>
                <!--end::Menu separator-->

                <div class="px-3">
                  <select class="form-select fw-bolder" name="year" placeholder="Filtrar por Año" [(ngModel)]="year_3">
                    <option [ngValue]="9999999" selected>Años</option>
                    <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                  </select>
                  <small class="form-text text-muted"><b>Filtrar</b> por Año</small>
                </div>
                <!--begin::Menu separator-->
                <div class="separator mt-3 opacity-75"></div>
                <!--end::Menu separator-->
                <div class="px-3">
                  <select class="form-select fw-bolder" name="month" placeholder="Filtrar por Mes"
                    [(ngModel)]="month_3">
                    <option [ngValue]="'9999999'" selected>Meses</option>
                    <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
                  </select>
                  <small class="form-text text-muted"><b>Filtrar</b> por Mes</small>
                </div>
                <div class="px-3">
                  <select class="form-control form-select-solid fw-bolder" name="sede_id_2"
                    placeholder="Filtrar por Sedes" [(ngModel)]="sede_id_2">
                    <option [ngValue]="9999999">Todos</option>
                    <ng-container *ngFor="let item of sedes">
                      <option [value]="item.id">{{ item.nombre }}</option>
                    </ng-container>

                  </select>
                  <small class="form-text text-muted"><b>Filtrar</b> por Sede</small>
                </div>

                <!--begin::Menu separator-->
                <div class="separator mt-3 opacity-75"></div>
                <!--end::Menu separator-->
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content px-3 py-3">
                    <a class="btn btn-primary btn-sm w-100" onclick="return false;" (click)="ventasXSegmentoCliente()"
                      href="#">
                      <i class="fs-2 ki-duotone ki-search-list">
                        <span class="path1"></span>
                        <span class="path2"></span>
                        <span class="path3"></span>
                      </i>
                      Generar Reporte
                    </a>
                  </div>
                </div>
                <!--end::Menu item-->
              </div>
              <!--end::Menu 2-->
              <!--end::Menu-->
            </div>
            <!--end::Toolbar-->
          </div>
          <div class="card-body d-flex align-items-end px-0 pt-3 pb-5" *ngIf="venta_x_segmento_clientes.length > 0">
            <div id="kt_charts_widget_18_chart" class="h-325px w-100 min-h-auto ps-4 pe-6"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<!--end::Row-->

<div class="row gx-5 gx-xl-10">
  <div class="col-xxl-7 mb-5 mb-xl-10">
    <div class="row gy-5 gx-xl-8">
      <div class="col-xxl-5">
        <div class="row g-5 g-xl-8">
          <div class="col-12">
            <div class="card card-xl-stretch mb-xl-8">
              <!--begin::Body-->
              <!--begin::Toolbar-->
              <div class="card-toolbar">
                <!--begin::Menu-->
                <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end"
                  data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
                  <i class="ki-duotone ki-dots-square fs-1">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    <span class="path3"></span>
                    <span class="path4"></span>
                  </i>
                </button>
                <!--begin::Menu 2-->
                <div
                  class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px"
                  data-kt-menu="true">
                  <!--begin::Menu item-->
                  <div class="menu-item px-3">
                    <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda:</div>
                  </div>
                  <!--end::Menu item-->
                  <!--begin::Menu separator-->
                  <div class="separator mb-3 opacity-75"></div>
                  <!--end::Menu separator-->

                  <div class="px-3">
                    <select class="form-select fw-bolder" name="year" placeholder="Filtrar por Año"
                      [(ngModel)]="year_4">
                      <option [ngValue]="9999999" selected>Años</option>
                      <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                    </select>
                    <small class="form-text text-muted"><b>Filtrar</b> por Año</small>
                  </div>
                  <!--begin::Menu separator-->
                  <div class="separator mt-3 opacity-75"></div>
                  <!--end::Menu separator-->
                  <div class="px-3">
                    <select class="form-select fw-bolder" name="month" placeholder="Filtrar por Mes"
                      [(ngModel)]="month_4">
                      <option [ngValue]="'9999999'" selected>Meses</option>
                      <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
                    </select>
                    <small class="form-text text-muted"><b>Filtrar</b> por Mes</small>
                  </div>

                  <!--begin::Menu separator-->
                  <div class="separator mt-3 opacity-75"></div>
                  <!--end::Menu separator-->
                  <!--begin::Menu item-->
                  <div class="menu-item px-3">
                    <div class="menu-content px-3 py-3">
                      <a class="btn btn-primary btn-sm w-100" onclick="return false;" (click)="ventasXVendedor()"
                        href="#">
                        <i class="fs-2 ki-duotone ki-search-list">
                          <span class="path1"></span>
                          <span class="path2"></span>
                          <span class="path3"></span>
                        </i>
                        Generar Reporte
                      </a>
                    </div>
                  </div>
                  <!--end::Menu item-->
                </div>
                <!--end::Menu 2-->
                <!--end::Menu-->
              </div>
              <!--end::Toolbar-->
              <div class="card-body d-flex align-items-center pt-3 pb-0" *ngIf="vendedor_mas_venta">
                <div class="d-flex flex-column flex-grow-1 py-2 py-lg-1 me-2">
                  <a href="#" class="fw-bold text-gray-900 fs-4 mb-2 text-hover-primary">{{ vendedor_mas_venta.vendedor
                    }}</a>
                  <span class="fw-semibold text-muted fs-5">Vendedor</span>
                </div>
                <img src="{{ vendedores.imagen }}" alt="" class="align-self-end h-100px" />
                <!-- /metronic8/demo1/assets/media/svg/avatars/029-boy-11.svg -->
              </div>
              <!--end::Body-->

            </div>
          </div>

          <div class="col-12 mt-0">
            <div class="card card-flush">
              <div class="card-header pt-5">
                <!--begin::Title-->
                <div class="card-title d-flex flex-column">
                  <!--begin::Info-->
                  <div class="d-flex align-items-center">
                    <!--begin::Currency-->

                    <!--end::Currency-->
                    <!--begin::Amount-->
                    <span class="fs-4 fw-semibold text-gray-500 me-1 align-self-start"> $</span>
                    <span class="fs-2hx fw-bold text-gray-900 me-2 lh-1 ls-n2">{{ vendedor_total_venta_mes_actual |
                      number:'1.2-2'}}</span>
                    <!--end::Amount-->
                    <!--begin::Badge-->
                    <span class="badge  fs-base"
                      [ngClass]="{'badge-light-success': vendedor_porcentaje_mas_ventas >= 0,'badge-light-danger': vendedor_porcentaje_mas_ventas < 0}">
                      <i class="ki-duotone ki-arrow-up fs-5 text-success ms-n1"
                        [ngClass]="{'text-success': vendedor_porcentaje_mas_ventas >= 0,'text-danger': vendedor_porcentaje_mas_ventas < 0}">
                        <span class="path1"></span>
                        <span class="path2"></span>
                      </i>{{ vendedor_porcentaje_mas_ventas }}%</span>
                    <!--end::Badge-->
                  </div>
                  <!--end::Info-->
                  <!--begin::Subtitle-->
                  <span class="text-gray-500 pt-1 fw-semibold fs-6">Ventas Diarias</span>
                  <!--end::Subtitle-->
                </div>
                <!--end::Title-->
              </div>
              <div class="card-body d-flex align-items-end px-0 pb-5" *ngIf="vendedor_mas_venta">
                <!--begin::Chart-->
                <div id="kt_card_widget_6_chart" class="w-100" style="height: 80px"></div>
                <!--end::Chart-->
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="col-xl-7">
        <div class="card card-flush h-xl-100">
          <div class="card-body d-flex align-items-end px-0 pt-3 pb-5">
            <div class="d-flex justify-content-between flex-column w-225px w-md-600px mx-auto mx-md-0 pt-3 pb-10">
              <!--begin::Title-->
              <div class="fs-4 fw-bold text-gray-900 text-center mb-5">Ventas por
                <br />Categorias
              </div>
              <!--end::Title-->
              <ng-container *ngIf="categorias_mas_ventas.length>0">
                <div id="kt_chart_widgets_22_chart_1" class="mx-auto mb-4"></div>
              </ng-container>

              <!--begin::Chart-->
              <!--end::Chart-->
              <!--begin::Labels-->
              <div class="mx-auto" *ngIf="categorias_mas_ventas">
                <ng-container *ngFor="let item of categorias_mas_ventas;let i=index">
                  <!--begin::Label-->
                  <div class="d-flex align-items-center mb-2">
                    <!--begin::Bullet-->
                    <div class="bullet bullet-dot w-8px h-7px me-2" [ngStyle]="{'background-color': getColorTag(i)}">
                    </div>
                    <!--end::Bullet-->
                    <!--begin::Label-->
                    <div class="fs-8 fw-semibold text-muted">{{ item.categoria }}({{ item.cantidad_articulos
                      }})</div>
                    <!--end::Label-->
                  </div>
                  <!--end::Label-->
                </ng-container>


              </div>
              <!--end::Labels-->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-xxl-5 mb-5 mb-xl-10">
    <!-- <app-cards-widget18 cssClass="h-xl-100" image="./assets/media/stock/600x600/img-65.jpg"></app-cards-widget18> -->
    <div class="card h-md-100">
      <!--begin::Header-->
      <div class="card-header align-items-center border-0">
        <!--begin::Title-->
        <h3 class="fw-bold text-gray-900 m-0">Productos con mas ventas por categorias</h3>
        <!--end::Title-->
        <!--begin::Menu-->
        <button class="btn btn-icon btn-color-gray-500 btn-active-color-primary justify-content-end"
          data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-overflow="true">
          <i class="ki-duotone ki-dots-square fs-1">
            <span class="path1"></span>
            <span class="path2"></span>
            <span class="path3"></span>
            <span class="path4"></span>
          </i>
        </button>
        <!--begin::Menu 2-->
        <div
          class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px"
          data-kt-menu="true">
          <!--begin::Menu item-->
          <div class="menu-item px-3">
            <div class="menu-content fs-6 text-gray-900 fw-bold px-3 py-4">Busqueda</div>
          </div>
          <!--end::Menu item-->
          <!--begin::Menu separator-->
          <div class="separator mb-3 opacity-75"></div>
          <!--end::Menu separator-->
          <div class="px-3">
            <select class="form-select fw-bolder" name="year" placeholder="Filtrar por Año" [(ngModel)]="year_5">
              <option [ngValue]="9999999" selected>Años</option>
              <option *ngFor="let year of years" [value]="year">{{ year }}</option>
            </select>
            <small class="form-text text-muted"><b>Filtrar</b> por Año</small>
          </div>
          <!--begin::Menu separator-->
          <div class="separator mt-3 opacity-75"></div>
          <!--end::Menu separator-->
          <div class="px-3">
            <select class="form-select fw-bolder" name="month" placeholder="Filtrar por Mes" [(ngModel)]="month_5">
              <option [ngValue]="'9999999'" selected>Meses</option>
              <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
            </select>
            <small class="form-text text-muted"><b>Filtrar</b> por Mes</small>
          </div>
          <!--begin::Menu separator-->
          <div class="separator mt-3 opacity-75"></div>
          <!--end::Menu separator-->
          <!--begin::Menu item-->
          <div class="menu-item px-3">
            <div class="menu-content px-3 py-3">
              <a class="btn btn-primary btn-sm w-100" onclick="return false;" (click)="ventasXCategorias()" href="#">
                <i class="fs-2 ki-duotone ki-search-list">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                </i>
                Generar Reporte
              </a>
            </div>
          </div>
          <!--end::Menu item-->
        </div>
        <!--end::Menu 2-->
        <!--end::Menu-->
      </div>
      <!--end::Header-->
      <!--begin::Body-->
      <div class="card-body pt-2">
        <!--begin::Nav-->
        <ul class="nav nav-pills nav-pills-custom mb-3">
          <ng-container *ngFor="let item of list_categories">
            <!--begin::Item-->
            <li class="nav-item mb-3 me-3 me-lg-6">
              <!--begin::Link-->
              <a class="nav-link d-flex justify-content-between flex-column flex-center overflow-hidden w-80px h-85px py-4"
                [ngClass]="{'w-80px': item.nombre.length <= 6 ,'w-100px': item.nombre.length > 6 && item.nombre.length <= 14,'w-150px': item.nombre.length > 14,
              'active': option_selected === item.id}" onclick="return false;"
                (click)="optionSelected(item.id,item.articulos)" data-bs-toggle="pill" href="#kt_stats_widget_2_tab_1">
                <!--begin::Icon-->
                <div class="nav-icon">
                  <img alt="" [src]="item.imagen" class="h-50px w-50px ms-n1" />
                </div>
                <!--end::Icon-->
                <!--begin::Subtitle-->
                <span class="nav-text text-gray-700 fw-bold fs-6 lh-1">{{ item.nombre }}</span>
                <!--end::Subtitle-->
                <!--begin::Bullet-->
                <span class="bullet-custom position-absolute bottom-0 w-100 h-4px bg-primary"></span>
                <!--end::Bullet-->
              </a>
              <!--end::Link-->
            </li>
            <!--end::Item-->
          </ng-container>

        </ul>
        <!--end::Nav-->
        <!--begin::Tab Content-->
        <div class="tab-content">
          <!--begin::Tap pane-->
          <div class="tab-pane fade show active" id="kt_stats_widget_2_tab_1">
            <!--begin::Table container-->
            <div class="table-responsive">
              <!--begin::Table-->
              <table class="table table-row-dashed align-middle gs-0 gy-4 my-0">
                <!--begin::Table head-->
                <thead>
                  <tr class="fs-7 fw-bold text-gray-500 border-bottom-0">
                    <th class="ps-0 w-50px">Item</th>
                    <th class="min-w-125px"></th>
                    <th class="text-end min-w-100px">Cantidad</th>
                    <th class="pe-0 text-end min-w-100px">Precio</th>
                    <th class="pe-0 text-end min-w-100px">Total</th>
                  </tr>
                </thead>
                <!--end::Table head-->
                <!--begin::Table body-->
                <tbody>
                  <ng-container *ngFor="let item of products_x_categories">
                    <tr>
                      <td>
                        <img [src]="item.imagen" class="w-50px ms-n1" alt="" />
                      </td>
                      <td class="ps-0">
                        <a [href]="'/articulos/list/editar/'+item.articulo_id" target="_blank"
                          class="text-gray-800 fw-bold text-hover-primary mb-1 fs-6 text-start pe-0">{{
                          item.articulo }}</a>
                        <span class="text-gray-500 fw-semibold fs-7 d-block text-start ps-0">Código: {{
                          item.sku }}</span>
                      </td>
                      <td>
                        <span class="text-gray-800 fw-bold d-block fs-6 ps-0 text-end">x{{
                          item.cantidad_articulos }}</span>
                      </td>
                      <td class="text-end pe-0">
                        <span class="text-gray-800 fw-bold d-block fs-6">{{ item.sub_total_venta }}
                          </span>
                      </td>
                      <td class="text-end pe-0">
                        <span class="text-gray-800 fw-bold d-block fs-6">{{ item.total_venta}}
                          </span>
                      </td>
                    </tr>
                  </ng-container>

                </tbody>
                <!--end::Table body-->
              </table>
              <!--end::Table-->
            </div>
            <!--end::Table container-->
          </div>
          <!--end::Tap pane-->
        </div>
        <!--end::Tab Content-->
      </div>
      <!--end: Card Body-->
    </div>
  </div>
</div>